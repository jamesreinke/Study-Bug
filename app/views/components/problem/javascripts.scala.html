@views.html.components.table.javascripts()
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.0.1/dropzone.js'></script>
<script>
	$(function(){
		var load = $('#ajax-load');
		var pid = $('#problem-id');
		var contents = $('#problem-contents');
		var topic = $('#problem-topic');
		var title = $('.form-title');
		var tbody = $('tbody');
		var update = $('.update');
		var pics = $('#pic-list');
		var numpics = 1;
		var files = [];
		$('.pictures').hide();
		load.hide();

		<!-- Generate the dropzone section after creating a problem and inserting the id -->
		function dropzone() {

			var pid = 0;
			var myDropzone = new Dropzone("#my-dropzone", {
				url: '/problem/pictures/' + pid,
				parallelUploads: true,
				paramName: 'pic',
				createImageThumbnails: true,
				thumbnailHeight: 80,
				success: function(file, response){
					$("#pic-list").append("<li><button data='"+response.id+"' class='pic-delete' type='button'><i class='fa fa-trash-o fa-3x'></i></button>  " + response.name + "</li>")
				}
			});
			$('.pictures').show();
		}

		$(document).on('click', '.pic-delete', function(){
			var item = $(this);
			var picid = $(this).attr("data");
			var probid = pid.val();
			load.show();
			$.ajax({
					type: 'POST',
					url: '@routes.Problem.picDelete',
					data: {pid: probid, pic: picid},
					success: function(data){
						item.parent().remove(); // remove the picture from the list
						$('.pic-option'+pic).remove();  // remove all selection options that included this picture
					},
					complete: function(data){
						load.hide();
					}
				});
		});

		$(document).on('click', '.submit',function(){
			var c = contents.val();
			var t = topic.val();
			$.ajax({
				type: 'POST',
				url: '@routes.Problem.create',
				data: {contents: c, topic: t},
				success: function(data){
					//empty out the table if we are adding the first entry
					var empty = $('tbody tr td').attr("colspan") == "5";
					if(empty) $('tbody tr').remove();
					tbody.append('<tr id="row-'+data.id+'">'+
					'<td>'+data.id+'</td>'+
					'<td>'+data.contents+'</td>'+
					'<td>'+data.topic+'</td>'+
					'<td><button class="edit" data="'+data.id+'" class="btn default btn-xs black">'+
					'<i class="fa fa-edit"></i> Edit </a></td>'+
					'<td><button class="del" data="'+data.id+'" class="btn default btn-xs red">'+
					'<i class="fa fa-trash-o"></i> Delete </a></td></tr>');
					// cancel();
				}
			});
		});

		$(document).on('click', '.edit', function(){
			var id = $(this).attr("data")
			$.ajax({
				type: 'POST',
				url: '@routes.Problem.get',
				data: {id: id},
				success: function(data) {
					pid.val(data.id);
					title.text("Problem ID: " + data.id);
					contents.val(data.contents);
					topic.val(data.topic);
					dropzone();
				}
			});
		});

	});
</script>